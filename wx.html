<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<style type="text/css">
body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
</style>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=sIaSBRhHsdUzEbYnjYWDr8H42jcvSKgP"></script>
<title> 电子地图平台</title>
<script src="./qwebchannel.js"></script>

</head>

<body>
<div id="allmap"></div>

</body>

<script>
new QWebChannel(qt.webChannelTransport, function(channel) {
  window.bridge = channel.objects.MainWindow;
   })
</script>
</html>

//*********************************javascript
<script type="text/javascript">

var bm = new BMap.Map("allmap");
bm.enableScrollWheelZoom(true);                         //**********开启滚轮缩放
var new_point = new BMap.Point(123.42602,41.771696);     //***********当前车的位置
var marker = new BMap.Marker(new_point);                //***********创建图像标注
bm.addOverlay(marker);                                   //******向地图添加图像标注
bm.centerAndZoom(new_point, 19);                        //********地图中心点移动至车当前位置，设置地图级别为19
bm.addEventListener("click",function(e){

                window.bridge.getCoordinates(e.point.lng,e.point.lat)

                });


      function theLocation(longitude, latitude)  //***************data type ...........longitude,latitude
        {
            if(longitude !="" && latitude !="")
            {
                bm.clearOverlays();              //清除所有的覆盖物
                var new_point = new BMap.Point(longitude,latitude);//创建点坐标
                var marker = new BMap.Marker(new_point);  // 创建标注
                bm.addOverlay(marker);                   //******向地图添加图像标注
                bm.setCenter(new_point);                 //****移动地图中心至标注点

            }
        }
</script>





/*ak=sIaSBRhHsdUzEbYnjYWDr8H42jcvSKgP

bm.enableScrollWheelZoom(true);


  
	 if(data !="")
   {   var str="";
	   str=data.replace(/;$/,"");
        var arr =[];
        var a = new Array();
        arr=str.split(";");
        a=arr[0].split(",");
        bm.clearOverlays();
        var new_point = new BMap.Point(a[0],a[1]);
        var marker = new BMap.Marker(new_point);
        bm.setCenter(new_point);// 创建标注
        bm.addOverlay(marker);
        var myIcon = new BMap.Icon("http://api.map.baidu.com/img/markers.png",new BMap.Size(4,4));
        
         for(var i=1;i<arr.length-1;i++)
        {
            a=arr[i].split(",");
            p=new BMap.Point(a[0],a[1]);
            marker=new BMap.Marker(p,{icon:myIcon});
            bm.addOverlay(marker);

         }
}*/
  
  
  // var data="123.413279,41.763066;123.413314,41.763180;123.413318,41.763054;123.413328,41.763009;123.413436,41.763049;123.413320,41.763171;123.413372,41.763050;123.413284,41.763172;123.413289,41.763144;123.413341,41.763023;123.413291,41.763014;123.413341,41.763144;123.413406,41.763144;123.413423,41.763018;123.413331,41.763059;123.413292,41.763131;123.413301,41.763018;123.413381,41.763176;123.413302,41.763203;123.413498,41.763166;123.413380,41.763180;123.413530,41.763000;123.413453,41.763022;123.413436,41.763207;123.413553,41.763175;123.413344,41.762892;123.413592,41.763175;123.413500,41.763054;123.413565,41.763053;123.413459,41.763148;123.413388,41.763221;123.413480,41.763175;123.413574,41.763148;123.413408,41.763221;123.413520,41.763148;123.413524,41.763013;123.413294,41.762892;123.413361,41.763248;123.413513,41.763216;123.413627,41.763053;123.413590,41.763058;123.413472,41.763202;123.413573,41.763022;123.413450,41.763238;123.413580,41.763008;123.413531,41.763027;123.413601,41.763026;123.413625,41.763179;123.413571,41.763225;123.413549,41.763252;123.413647,41.763017;123.413634,41.763229;123.413668,41.763148;123.413681,41.763058;123.413801,41.763057;123.413788,41.763152;123.413761,41.763026;123.413759,41.763179;123.413740,41.763233;123.413847,41.763156;123.413820,41.763183;123.413811,41.762989;123.413794,41.763215";


/*var str="123.42689,41.770481;123.426951,41.771101;123.426961,41.771192;123.426841,41.771192;123.426841,41.771192;123.425991,41.771232;123.425869,41.769791;123.426699,41.769761;123.426819,41.769751;123.426829,41.769841;123.426829,41.769841;123.42688,41.770311;123.42689,41.770481;123.42491,41.770523;123.42491,41.770453;123.424859,41.769933;123.424849,41.769843;123.424969,41.769843;123.424969,41.769842;123.425869,41.769791;123.425991,41.771232;123.425801,41.771252;123.425111,41.771283;123.424991,41.771293;123.424981,41.771203;123.42498,41.771203;123.42491,41.770523";
var arr =[];
var a = new Array();
arr=str.split(";");
var b=arr.length;

for(var i=0;i<arr.length;i++)
  {   a=arr[i].split(",");
	  arr[i]=new BMap.Point(a[0],a[1]);   

  }
var polyline = new BMap.Polyline(arr);
 map.addOverlay(polyline);*/

#123.414182,41.763317$123.414040,41.763306;123.414230,41.763329;123.414040,41.763321;123.414040,41.763344;123.414238,41.763420;123.414230,41.763374;123.414078,41.763344;123.414024,41.763363;123.414070,41.763390;123.414024,41.763298;123.414215,41.763344;123.414024,41.763321;123.414024,41.763332;123.414032,41.763432;123.413994,41.763443;123.414230,41.763466;123.413994,41.763493;123.414017,41.763367;123.414001,41.763344;123.414078,41.763432;123.414001,41.763523;123.414085,41.763565;123.414032,41.763412;123.413979,41.763416;123.414230,41.763573;123.414085,41.763519;123.413940,41.763344;123.413971,41.763653;123.414055,41.763618;123.413887,41.763542;123.414230,41.763641;123.414040,41.763657;123.414040,41.763565;123.414085,41.763664;123.414246,41.763603;123.413933,41.763538;123.414047,41.763733;123.413994,41.763699;123.414093,41.763760;123.414238,41.763725;123.414047,41.763710*123.41415025,41.763313;123.41415025,41.763321;123.41415030,41.763332;123.41415030,41.763340;123.41415040,41.763348;123.414153,41.763359;123.414154,41.763367;123.414154,41.763374;123.414154,41.763386;123.414154,41.763393;123.414153,41.763401;123.414154,41.763412?
